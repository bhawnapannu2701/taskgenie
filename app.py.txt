from flask import Flask, request, jsonify
from task_predictor import predict_priority
from models import create_table

app = Flask(__name__)

# Route to fetch all tasks
@app.route('/tasks', methods=['GET'])
def get_tasks():
    # This is where you would fetch tasks from SQLite (will implement later)
    return jsonify({"tasks": []})

# Route to add a new task
@app.route('/add_task', methods=['POST'])
def add_task():
    task_data = request.json
    # Save task to SQLite (will implement later)
    return jsonify({"message": "Task added successfully!"})

# Route to predict task priority
@app.route('/predict_priority', methods=['POST'])
def predict_task_priority():
    task_data = request.json['data']
    priority = predict_priority(task_data)
    return jsonify({'priority': priority})

if __name__ == '__main__':
    create_table()  # Call the function to create the database table
    app.run(debug=True)  # Start the Flask server
